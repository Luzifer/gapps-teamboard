<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/1.1.1/js/md5.min.js"></script>

<script type="text/jsx">

// tutorial1.js
var TeamList = React.createClass({

  getInitialState: function() {
    return {data: []};
  },

  componentDidMount: function() {

    var that = this;

    google.script.run
       .withSuccessHandler(function(teams) {
          that.setState({data: teams});
          })
       .getTeams();
  },

  render: function() {
  
    var teamNodes = this.state.data.map(function (team) {
      return (
        <Team key={team.name} {...team} />
      );
    });
    
    return (
      <div className="teamList">
        {teamNodes}
      </div>
    );
  }
});

var Team = React.createClass({
  render: function() {
    return (
      <div className="jumbotron">
        <div className="container">
          <h2 className="teamName">{this.props.name}</h2>
          <TeamMembers members={this.props.members}></TeamMembers>
        </div>
      </div>
    );
  }
});

var TeamMembers = React.createClass({
  render: function() {
    var teamMemberNodes = this.props.members.map(function (member) {
      return (
        <TeamMember key={member} email={member} />
      );
    });
    
    return (
      <div className="teamMemberList">
        {teamMemberNodes}
      </div>
    );
  }
});

var TeamMember = React.createClass({
  render: function() {
    return (
          <img src={"http://gravatar.com/avatar/" + md5(this.props.email) + ".png"} />
    );
  }
});

React.render(
  <TeamList />,
  document.getElementById('content')
);

</script>
